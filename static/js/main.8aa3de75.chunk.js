(this["webpackJsonpchat-idbi"]=this["webpackJsonpchat-idbi"]||[]).push([[0],{351:function(e,t,a){e.exports=a(428)},356:function(e,t,a){},357:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=(a(356),a(31)),s=a(97),i=(a(357),a(98));function u(){var e=Object(s.a)(["\n  max-height: 100%;"]);return u=function(){return e},e}function m(){var e=Object(s.a)(["\n  width: 60%;\n"]);return m=function(){return e},e}function d(){var e=Object(s.a)(["\n  color: #110F29;\n  text-align: center;\n"]);return d=function(){return e},e}var f=i.a.h1(d()),h=i.a.div(m()),b=i.a.img(u()),p=function(e){var t=e.connect,a=Object(n.useState)(""),c=Object(o.a)(a,2),l=c[0],s=c[1];return r.a.createElement("section",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-12 px-0"},r.a.createElement(b,{className:"img-fluid",src:"https://previews.123rf.com/images/prettyvectors/prettyvectors1902/prettyvectors190200004/117030328-two-people-man-and-woman-character-talking-to-a-smart-phone-online-communication-email-message-conce.jpg"})),r.a.createElement("div",{className:"col-md-6 col-12 my-5 d-flex flex-column justify-content-around align-items-center"},r.a.createElement(f,null,"ID Business Intelligence"),r.a.createElement(h,{className:"d-flex flex-column"},r.a.createElement("label",{className:"font-weight-bold"}," Nombre:  "),r.a.createElement("input",{type:"text",className:"form-control mb-3",placeholder:"Ingresa tu nombre",value:l,onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{className:"btn btn-dark",onClick:function(){return t(l)},disabled:!l},"Ingresar")),r.a.createElement("p",null,"@Copyright 2020"))))},g=a(138),v=a.n(g),E=function(e){var t=e.myActivateChats,a=e.setCurrentChat,n=e.myPrivateChats,c={columns:[{title:"GRUPOS",field:"group",headerStyle:{color:"#7774E1"}}],data:t.map((function(e){return{group:e}}))},l={columns:[{title:"INDIVIDUAL",field:"private",headerStyle:{color:"#7774E1"}}],data:n.map((function(e){return{private:e}}))};return r.a.createElement("section",null,r.a.createElement(v.a,{title:"",columns:c.columns,data:c.data,onRowClick:function(e,t){return a(t.group)},localization:{toolbar:{searchPlaceholder:"Buscar Grupo"}},options:{searchFieldAlignment:"left",paging:!1}}),r.a.createElement("hr",null),r.a.createElement(v.a,{title:"",columns:l.columns,data:l.data,onRowClick:function(e,t){return a(t.private)},localization:{toolbar:{searchPlaceholder:"Buscar Individual"}},options:{searchFieldAlignment:"left",paging:!1}}))};function C(){var e=Object(s.a)(["\nbackground-color: #E1E0FF;\nwidth: 60%;\n"]);return C=function(){return e},e}var j=i.a.div(C()),O=function(e){var t=e.messages,a=void 0===t?[]:t,c=e.sendMessage,l=e.currentChat,s=(e.users,e.currentUser),i=Object(n.useState)(""),u=Object(o.a)(i,2),m=u[0],d=u[1],f=a.sort((function(e,t){return new Date(e.created).valueOf()-new Date(t.created).valueOf()}));return r.a.createElement("div",{className:"d-flex flex-column justify-content-between",style:{height:"100%"}},r.a.createElement("h2",null,l),r.a.createElement("div",{className:"messages"},f.map((function(e,t){return r.a.createElement("div",{key:t,className:e.sender===s?"d-flex justify-content-end":"d-flex justify-content-start"},r.a.createElement(j,{className:e.sender===s?"mb-2 p-2 bg-info text-white rounded-pill":"mb-2 p-2 rounded-pill",key:t},e.sender," : ",e.body))}))),r.a.createElement("div",{className:"send-message d-flex"},r.a.createElement("input",{value:m,className:"text-entry form-control rounded-pill",placeholder:"Escribe un mensaje",onChange:function(e){return d(e.target.value)}}),r.a.createElement("button",{className:"btn btn-inherit font-weight-bold",onClick:function(){return c(l,m)}},"Enviar")))},y=a(311),N=a(457),w=a(303),k=a(86),x=a(312),S=Object(y.a)((function(e){return{root:{flexGrow:1},nav:{backgroundColor:"black"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function I(e){var t=e.user,a=(e.setUserId,S());return r.a.createElement("div",{className:a.root},r.a.createElement(N.a,{position:"static",className:a.nav},r.a.createElement(w.a,null,r.a.createElement(k.a,{variant:"h6",className:a.title},"ID Business Intelligence"),r.a.createElement(x.a,{color:"inherit"},t))))}var P=a(239),A=function(e,t){Object(P.database)().ref(e).on("value",(function(e){e.val()&&t(e.val())}))},U=function(e,t){Object(P.database)().ref(e).set(t)},B=a(460);function R(e){var t=e.users,a=e.createChat,n=e.userCurrent,c={columns:[{title:"USUARIOS",field:"user",headerStyle:{color:"#FF5722"}}],data:t.map((function(e){return{user:e}}))};return r.a.createElement("section",null,r.a.createElement(v.a,{title:"",columns:c.columns,data:c.data,onRowClick:function(e,t){return a([t.user],"".concat(n,"--\x3e").concat(t.user),"chatPrivate")},localization:{toolbar:{searchPlaceholder:"Buscar Usuario"}},options:{searchFieldAlignment:"left",paging:!1}}))}var W=a(343),M=a(4),D=a(449),z=a(458),F=a(450),G=a(233),L=a(341),T=a.n(L),V=a(18),J=a(189),X=a(235),H=a(302),K=a(234),$=a(237),_=a(333),q=Object(y.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:600},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),Q={PaperProps:{style:{maxHeight:224,width:250}}};function Y(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}function Z(e){var t=e.users,a=e.setRecipient,n=q(),c=Object(V.a)(),l=r.a.useState([]),s=Object(o.a)(l,2),i=s[0],u=s[1];return r.a.createElement("div",null,r.a.createElement(K.a,{className:n.formControl},r.a.createElement(X.a,{id:"demo-mutiple-chip-label"},"Miembros:"),r.a.createElement($.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:i,onChange:function(e){u(e.target.value),a(e.target.value)},input:r.a.createElement(J.a,{id:"select-multiple-chip"}),renderValue:function(e){return r.a.createElement("div",{className:n.chips},e.map((function(e){return r.a.createElement(_.a,{key:e,label:e,className:n.chip})})))},MenuProps:Q},t.map((function(e){return r.a.createElement(H.a,{key:e,value:e,style:Y(e,i,c)},e)})))))}var ee=function(e){var t=e.createChat,a=e.users,c=Object(n.useState)(""),l=Object(o.a)(c,2),s=l[0],i=l[1],u=Object(n.useState)(a[0]),m=Object(o.a)(u,2),d=m[0],f=m[1];return r.a.createElement("div",{className:"panel"},r.a.createElement("label",null,"Nombre: "),r.a.createElement("input",{type:"text",className:"form-control mb-3",placeholder:"Ingresa un nombre para el grupo",onChange:function(e){return i(e.target.value)},value:s}),r.a.createElement("label",null,"Elija miembros (Ctrl + click) :"),r.a.createElement(Z,{users:a,setRecipient:f}),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("button",{className:"btn btn-dark",onClick:function(){return t(d,s,"chats")},disabled:!s||!d},"Crear")))},te=Object(M.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,c=Object(W.a)(e,["children","classes","onClose"]);return r.a.createElement(z.a,Object.assign({disableTypography:!0,className:a.root},c),r.a.createElement(k.a,{variant:"h6"},t),n?r.a.createElement(G.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(T.a,null)):null)})),ae=Object(M.a)((function(e){return{root:{padding:e.spacing(2)}}}))(F.a);function ne(e){var t=e.createChat,a=e.users,n=e.userId,c=r.a.useState(!1),l=Object(o.a)(c,2),s=l[0],i=l[1],u=function(){i(!1)};return r.a.createElement("div",null,r.a.createElement(x.a,{variant:"outlined",color:"inherit",onClick:function(){i(!0)}},"Crear grupo"),r.a.createElement(D.a,{onClose:u,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"customized-dialog-title",open:s},r.a.createElement(te,{id:"customized-dialog-title",onClose:u},"CREAR GRUPO"),r.a.createElement(ae,{dividers:!0},r.a.createElement(ee,{createChat:t,users:a.filter((function(e){return e!==n}))}))))}var re=a(461),ce=a(321),le=Object(y.a)((function(e){return{orange:{color:e.palette.getContrastText(ce.a[500]),backgroundColor:ce.a[500]}}}));function oe(e){var t=e.user,a=t.slice(0,2).toUpperCase(),n=le();return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(re.a,{className:n.orange},a),r.a.createElement("h2",{className:"ml-2"},t))}function se(){var e=Object(s.a)(["\nbackground: white;\nheight: 100vh;\n"]);return se=function(){return e},e}var ie=i.a.div(se());var ue=function(){var e=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(o.a)(c,2),s=l[0],i=l[1];Object(n.useEffect)((function(){u()}),[]);var u=function(){A("/users",(function(e){i(Object.keys(e))}))};return[a,r,s,function(e){s&&s.includes(e)||U("/users/".concat(e),!0),r(e)}]}(),t=Object(o.a)(e,4),a=t[0],c=t[1],l=t[2],s=t[3],i=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)([]),s=Object(o.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)([]),d=Object(o.a)(m,2),f=d[0],h=d[1],b=Object(n.useState)([]),p=Object(o.a)(b,2),g=p[0],v=p[1],E=Object(n.useState)([]),C=Object(o.a)(E,2),j=C[0],O=C[1];Object(n.useEffect)((function(){A("/users/".concat(e,"/chats"),(function(e){u(Object.keys(e))})),A("/users/".concat(e,"/chatPrivate"),(function(e){h(Object.keys(e))})),A("/chats/".concat(r,"/messages"),(function(e){v(Object.values(e))})),A("/chats/".concat(r,"/users"),(function(e){O(Object.values(e))}))}),[r,e]);return{sendMessage:function(t,a){var n=Object(B.a)();U("/chats/".concat(t,"/messages/").concat(n),{body:a,sender:e,created:(new Date).toISOString()})},createChat:function(t,a,n){U("users/".concat(e,"/").concat(n,"/").concat(a),a),U("/".concat(n,"/").concat(a,"/messages"),{}),U("/".concat(n,"/").concat(a,"/users/").concat(e),e),c(a),t.forEach((function(e){U("users/".concat(e,"/").concat(n,"/").concat(a),a),U("/".concat(n,"/").concat(a,"/users/").concat(e),e)}))},currentChat:r,myActivateChats:i,myPrivateChats:f,currentChatMessages:g,currentChatUsers:j,setCurrentChat:c}}(a),u=i.sendMessage,m=i.createChat,d=i.currentChat,f=i.myActivateChats,h=i.myPrivateChats,b=i.currentChatMessages,g=i.currentChatUsers,v=i.setCurrentChat;return r.a.createElement(ie,{className:"App"},a?r.a.createElement("section",null,r.a.createElement(I,{user:a,setUserId:c}),r.a.createElement("div",{className:"container-fluid mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 col-12 mb-4"},r.a.createElement(oe,{user:a}),r.a.createElement(R,{users:l.filter((function(e){return e!==a})),createChat:m,userCurrent:a})),r.a.createElement("div",{className:"col-md-3 col-12 mb-4"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h3",null,"Chats"),r.a.createElement(ne,{createChat:m,users:l.filter((function(e){return e!==a}))})),r.a.createElement(E,{setCurrentChat:v,myActivateChats:f,myPrivateChats:h})),r.a.createElement("div",{className:"col-md-6 col-12 mb-4 container-fluid"},d&&r.a.createElement(O,{sendMessage:u,currentUser:a,currentChat:d,messages:b,users:g}))))):r.a.createElement(p,{connect:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me={apiKey:"AIzaSyDaN0_upo1P3kgW6zkfSkf7VAXlByIaaXw",authDomain:"idbi-ff4e5.firebaseapp.com",databaseURL:"https://idbi-ff4e5.firebaseio.com",projectId:"idbi-ff4e5",storageBucket:"idbi-ff4e5.appspot.com",messagingSenderId:"79757724217",appId:"1:79757724217:web:27e944ee7313f2132c5be8",measurementId:"G-0MW87LLBLC"};a(342).initializeApp(me),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[351,1,2]]]);
//# sourceMappingURL=main.8aa3de75.chunk.js.map